<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>HTML5</title>
  <style>
   article, aside, details, figcaption, figure, footer,header,
   hgroup, menu, nav, section { display: block; }
  </style>
 </head>
 <body>
  <p>Привет, мир!</p>
  <p class="text"></p>
  <p class="param text"> </p>
 </body>

 <script>   

    var currentLocation = window.location.href;    
    console.log(currentLocation);
    document.getElementsByClassName('text')[0].textContent = currentLocation;

    const parsedUrl = new URL(window.location.href);
    document.getElementsByClassName('param text')[0].textContent = parsedUrl.searchParams.get("hash");
    //console.log(parsedUrl.searchParams.get("hash")); // "123"

</script>

<script src="https://vk.com/js/api/xd_connection.js?2"  type="text/javascript"></script>
<script src="https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js"></script>
<script>
    vkBridge.send("VKWebAppInit", {})
    .then(_sdk => {
            //this.add.text(0, 100, 'Init3', {font:'50px Arial', align: 'center'});
            //this.add.text(0, 150, 'init2', {font:'50px Arial', align: 'center'})
            vkBridge.send('VKWebAppGetUserInfo')
            .then(_info => {
                window.localStorage['uniqueId'] = _info.id
                console.log('uniqueId:' + _info.id)
                //let request = new RequestsAPI();
                //request.authPost(2, _info.first_name, _info.photo_100)
                .then(_data => {
                    window.localStorage['playerId'] = _data.playerId
                    console.log('playerId:' + _data.playerId)
                    window.localStorage['playerName'] = _data.playerName
                    console.log('playerName:' + _data.playerName)
                    //this.scene.start('Menu')                    
                })
                //this.add.text(0, 200, window.localStorage['uniqueId'], {font:'50px Arial', align: 'center'})
            })
        }) 
</script>
</html>
